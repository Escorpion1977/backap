{
  "name": "Backap",
  "tagline": "MySQL database backup manager",
  "body": "# **Backap**\r\n\r\nBackap is a MySQL database backup manager written in PHP that can be bundled into a PHAR file. Backap aims to simply the process of dumping, restoring and syncing MySQL databases using simple CLI commands.\r\n\r\n## **How do I get started?**\r\nYou can use Backap in one of three ways:\r\n\r\n### As a Phar (Recommended)\r\n\r\nYou may download a ready-to-use version of Backap as a Phar:\r\n```sh\r\n$ curl -LSs https://tecactus.github.io/backap/installer.php | php\r\n```\r\nThe command will check your PHP settings, warn you of any issues, and the download it to the current directory. From there, you may place it anywhere that will make it easier for you to access (such as `/usr/local/bin`) and chmod it to `755`. You can even rename it to just `backap` to avoid having to type the `.phar` extension every time.\r\n```sh\r\n$ backap --version\r\n```\r\nWhenever a new version of the application is released, you can simply run the `update` command to get the latest version:\r\n```sh\r\n$ backap update\r\n```\r\n\r\n### As a Global Composer Install\r\n\r\nThis is probably the best way when you have other tools like phpunit and other tools installed in this way:\r\n```sh\r\n$ composer global require tecactus/backap --prefer-source\r\n```\r\n\r\n### As a Composer Dependency\r\n\r\nYou may also install Box as a dependency for your Composer managed project:\r\n```sh\r\n$ composer require --dev tecactus/backap\r\n```\r\nor\r\n```json\r\n{\r\n    \"require-dev\": {\r\n        \"tecactus/backap\": \"~1.0\"\r\n    }\r\n}\r\n```\r\nOnce you have installed the application, you can run the `help` command to get detailed information about all of the available commands. This should be your go-to place for information about how to use Backap.\r\n```sh\r\n$ backap help\r\n```\r\n\r\n## **Available Commands**\r\n\r\n### **init**\r\n\r\nthe `init` command creates a yaml configuration file called `.backap.yaml` into the current directory.\r\n```sh\r\n$ backap init\r\n```\r\nThe  `.backap.yaml` file structure is as follows:\r\n\r\n#### backap_storage_path (optional)\r\nIn this attribute you can define the *path* where all the backup files generated with Backap will be stored.\r\n\r\nThis path *MUST* be *ABOSULTE* if is defined.\r\n\r\n```yaml\r\nbackap_storage_path: /absolute/path/to/backups/folder\r\n```\r\nIf any path is defined or if you omit this attribute, Backap will create a `storage/database` folder into the current directory.\r\n\r\n#### mysqldump_path (optional)\r\nIn this attribute you can define the path where `mysqldump` is located.\r\n\r\nThis path *MUST* be *ABOSULTE* if is defined.\r\n```yaml\r\nmysqldump_path: /path/to/mysqldump\r\n```\r\nIf any path is defined or if you omit this attribute, Backap will try to call the globally reference to `mysqldump`.\r\n\r\n#### mysql_path (optional)\r\nIn this attribute you can define the path where `mysql` is located.\r\n\r\nThis path *MUST* be *ABOSULTE* if is defined.\r\n```yaml\r\nmysql_path: /path/to/mysql\r\n```\r\nIf any path is defined or if you omit this attribute, Backap will try to call the globally reference to `mysql`.\r\n\r\n#### timezone (optional)\r\nIn this attribute you can define an specific *timezone*, this to know when the backup files were generated.\r\n\r\nThis timezone *MUST* have a *VALID* name.\r\n\r\nFor example:\r\n```yaml\r\ntimezone: America/Lima\r\n```\r\nIf any timezone is defined or if you omit this attribute, Backap will use *UTC*.\r\n\r\n#### enable_compression (optional)\r\nBackap generates `.sql` files by default, you can tell Backap to compress the generated backup file enabling compression then Backap will generate `.sql.gz` files.\r\n\r\nThis value *MUST* be *BOOLEAN* if is defined.\r\n```yaml\r\nenable_compression: true\r\n```\r\nIf any value is defined or if you omit this attribute, Backap sets compression as `false` by default.\r\n\r\n#### default_connection (mandatory)\r\nBackap needs to know which of your database connections will dump or restore, that's why you have to define a default connection to work on when you do not explicits define one.\r\n\r\nThe connection name *MUST* be *DECLARED* as an element on the *connections* array attribute.\r\n```yaml\r\ndefault_connection: myconnection\r\n```\r\n\r\n#### connections (mandatory)\r\nBackap can handle multiple database connections at the same time but first you have to define each one and asing them a diferent name.\r\n\r\nEach connection *MUST* have *HOSTNAME, DATABASE and USERNAME * declared attribtues.\r\nPORT and PASSWORD are optional.\r\n\r\nFor example:\r\n```yaml\r\nconnections:\r\n  myconnection:\r\n    hostname: 192.168.1.27\r\n    port: 3306\r\n    database: important_db\r\n    username: userdb\r\n    password: supersecretpassword\r\n```\r\nIn the example we defined a connection named `myconnection`.\r\nOf course you can define many as you want:\r\n```yaml\r\nconnections:\r\n\r\n...\r\n\r\n  myconnection:\r\n    hostname: 192.168.1.27\r\n    port: 3306\r\n    database: important_db\r\n    username: userdb\r\n    \r\n...\r\n\r\n  otherconnection:\r\n    hostname: 177.200.100.9\r\n    port: 3306\r\n    database: other_db\r\n    username: admindb\r\n    password: supersecretpassword\r\n    \r\n...\r\n```\r\n\r\n#### cloud (optional)\r\nBackap allows you to sync your backup files with cloud providers as *Dropbox*.\r\nTo enable this feature you must declare and array atribute called `cloud` and inside them declare, with a unique name, each of the cloud adapters, as an array too, that will be available to sync.\r\n\r\nFor example:\r\n```yaml\r\ncloud:\r\n  adapaterone:\r\n    ...    \r\n  adapatertwo:\r\n    ...\r\n```\r\nEach provider requires diferent parameters thats why every adapter required diferent attributes but all of them *MUST* have an *ATTRIBUTE* called `provider`.\r\n\r\nFor example:\r\n```yaml\r\ncloud:\r\n  adapaterone:\r\n    provider: dropbox\r\n    ...\r\n```\r\n\r\n##### Dropbox Adapter\r\n\r\nTo declare a Dropbox adapter you must define the following attributes:\r\n- **provider** as ***dropbox***\r\n- **access_token** generated on [Dropbox for Developers](https://www.dropbox.com/developers)\r\n- **app_secret** generated on [Dropbox for Developers](https://www.dropbox.com/developers)\r\n- **path** will be the path inside your Dropbox\r\n\r\nFor example:\r\n```yaml\r\ncloud:\r\n  dropbox:\r\n    provider: dropbox\r\n    access_token: your_access_token\r\n    app_secret: your_secret\r\n    path: /path/on/your/dropbox\r\n```\r\n\r\n\r\n### **mysql:dump**\r\nThe `mysql:dump` command dumps the database for the `default_connection` .\r\n```sh\r\n$ backap mysql:dump\r\n```\r\n\r\n#### **--connection, -c**\r\nYou can explicit define one or more connections to be dumped\r\n```sh\r\n$ backap mysql:dump --conection myconnection --connection otherconnetion\r\n```\r\nor\r\n```sh\r\n$ backap mysql:dump -c myconnection -c otherconnection\r\n```\r\n\r\n#### **--no-compress**\r\nDisable file compression regardless if is enabled in `.backap.yaml` file. This option will be always overwrited by `--compress` option.\r\n```sh\r\n$ backap mysql:dump --no-compress\r\n```\r\n\r\n#### **--compress**\r\nEnable file compression regardless if is disabled in `.backap.yaml` file. This option will always overwrite `--no-compress` option.\r\n```sh\r\n$ backap mysql:dump --compress\r\n```\r\n\r\n#### **--sync, -s**\r\nYou can sync dump files with one or more cloud provider at the moment the dump file is generated. This option will be always overwrited by `--sync-all` option.\r\n```sh\r\n$ backap mysql:dump --sync dropboxone --sync dropboxtwo\r\n```\r\nor\r\n```sh\r\n$ backap mysql:dump -s dropboxone -s dropboxtwo\r\n```\r\n\r\n#### **--sync-all, -S**\r\nAlso you can sync dump files with all the defined cloud provider at the same time at the moment the dump file is generated. This option will always overwrite `--sync` option.\r\n```sh\r\n$ backap mysql:dump --sync-all\r\n```\r\nor\r\n```sh\r\n$ backap mysql:dump -S\r\n```\r\n\r\n### **mysql:restore**\r\nThe `mysql:restore` command restores the `default_connection`  database from a backup file.\r\n```sh\r\n$ backap mysql:restore\r\n```\r\nThe `mysql:restore` command displays a list of all the backup files available *only* for the connection's database. Latest backup file is selected as default.\r\nThen Backap ask for your confirmation to proceed with the database restoration.\r\n\r\n#### **--conection, -c**\r\nYou can explicit define the connection name to be restored\r\n```sh\r\n$ backap mysql:restore --conection otherconnetion\r\n```\r\nor\r\n```sh\r\n$ backap mysql:restore -c otherconnection\r\n```\r\n\r\n#### **--filename, -f**\r\nYou can explicit define the backup file name to be restored\r\n```sh\r\n$ backap mysql:restore --filename mybackupfile.sql\r\n```\r\nor\r\n```sh\r\n$ backap mysql:restore -f mybackupfile.sql\r\n```\r\n\r\n#### **--all-backup-files, -A**\r\nThe `mysql:restore` command by default displays a list of all the backup files available *only* for the defined connection's database but you can use the `--all-backup-files` option to return a list of all backup file generated by Backap. Latest backup file is selected as default.\r\n```sh\r\n$ backap mysql:restore --all-backup-files\r\n```\r\nor\r\n```sh\r\n$ backap mysql:restore -A\r\n\r\n```\r\n#### **--restore-latest-backup , -L**\r\nExplicit restore the latest backup file for the connection's database.\r\n```sh\r\n$ backap mysql:restore --restore-latest-backup \r\n```\r\nor\r\n```sh\r\n$ backap mysql:restore -L\r\n```\r\n\r\n#### **--yes, -y**\r\nThe `mysql:restore` command always ask for your confirmation to proceed but you can confirm it without seeing the confirmation prompt using the `--yes` option.\r\n```sh\r\n$ backap mysql:restore --yes\r\n```\r\nor\r\n```sh\r\n$ backap mysql:restore -y\r\n```\r\n\r\n#### **--from-cloud, -C**\r\nDisplay a list of cloud providers where to retrieve backup files.\r\n```sh\r\n$ backap mysql:restore --from-cloud\r\n```\r\nor\r\n```sh\r\n$ backap mysql:restore -C\r\n```\r\n\r\n#### **--from-provider, -p**\r\nExplicit define the cloud provider where to retrieve backup files\r\n```sh\r\n$ backap mysql:restore --from-provider dropboxone\r\n```\r\nor\r\n```sh\r\n$ backap mysql:restore -p dropboxone\r\n```\r\n\r\n### **files**\r\nThe `files` command displays a table with detailed data about all the backup files stored on your `backap_storage_path`\r\n```sh\r\n$ backap files\r\n```\r\n\r\n#### **--from-cloud, -C**\r\nDisplay a list of cloud providers where to retrieve backup files.\r\n```sh\r\n$ backap files --from-cloud\r\n```\r\nor\r\n```sh\r\n$ backap files -C\r\n```\r\n\r\n#### **--from-provider, -p**\r\nExplicit define the cloud provider where to retrieve backup files\r\n```sh\r\n$ backap files --from-provider dropboxone\r\n```\r\nor\r\n```sh\r\n$ backap files -p dropboxone\r\n```\r\n\r\n### **sync**\r\nThe `sync` command allows you to synchronize backup files with cloud providers. Pull files from cloud or push file to remote storage providers.\r\nBy default the `sync` asks you to choose a provider from a list of current configured providers but you can explicit define a provider using the `--provider` option.\r\n\r\n#### **push**\r\nThe `push` action will sync all your backup files stored locally to the remote selected provider.\r\n```sh\r\n$ backap sync push\r\n```\r\nor\r\n```sh\r\n$ backap sync push --provider dropboxone\r\n```\r\nor\r\n```sh\r\n$ backap sync push -p dropboxone\r\n```\r\n\r\n#### **pull**\r\nThe `pull` action will sync all your backup files stored on the selected provider to your local storage folder.\r\n```sh\r\n$ backap sync pull\r\n```\r\nor\r\n```sh\r\n$ backap sync pull --provider dropboxone\r\n```\r\nor\r\n```sh\r\n$ backap sync pull -p dropboxone\r\n```\r\n",
  "note": "Don't delete this file! It's used internally to help with page regeneration."
}